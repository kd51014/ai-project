<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>{% block title %}Forum{% endblock %}</title>
<link rel="icon" href="/static/favicon.ico">
<link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>

<body>
<header class="site-header">
  <a href="/" class="logo">Forum</a>

  <nav>
    {% if session.user_login %}
      <span>{{ session.user_login }}</span>
      <a href="/users/edit">Profil</a>
      <a href="/auth/logout">Wyloguj</a>
	  <button id="toggleDarkMode" class="btn btn-secondary">ğŸŒ™ Dark Mode</button>
    {% else %}
      <a href="/auth/login">Logowanie</a>
      <a href="/auth/register">Rejestracja</a>
    {% endif %}
  </nav>
</header>

{% if get_flashed_messages() %}
<div class="flash">
  {% for msg in get_flashed_messages() %}
    <p>{{ msg }}</p>
  {% endfor %}
</div>
{% endif %}

<main class="container">
  {% block content %}{% endblock %}
</main>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const modal = document.getElementById('addPostModal');
  const showBtn = document.getElementById('showAddPost');
  const hideBtn = document.getElementById('hideAddPost');

  if (showBtn) showBtn.onclick = () => {
    modal.style.display = 'flex';
    document.body.style.overflow = 'hidden';
  };

  if (hideBtn) hideBtn.onclick = () => {
    modal.style.display = 'none';
    document.body.style.overflow = 'auto';
  };

  if (modal) modal.onclick = e => {
    if (e.target === modal) {
      modal.style.display = 'none';
      document.body.style.overflow = 'auto';
    }
  };
});
</script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const toggleBtn = document.getElementById('toggleDarkMode');
  const body = document.body;

  if(localStorage.getItem('darkMode') === 'true') {
    body.classList.add('dark');
    toggleBtn.textContent = 'â˜€ï¸ Light Mode';
  }

  toggleBtn.addEventListener('click', () => {
    body.classList.toggle('dark');
    const isDark = body.classList.contains('dark');
    localStorage.setItem('darkMode', isDark);
    toggleBtn.textContent = isDark ? 'â˜€ï¸ Light Mode' : 'ğŸŒ™ Dark Mode';
  });
});
</script>

</body>
</html>
